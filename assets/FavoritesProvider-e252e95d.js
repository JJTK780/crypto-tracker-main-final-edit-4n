import{j as m}from"./index-15e47a63.js";import{r as i,u as l}from"./vendor-fe4621a0.js";import"./ui-4399f06a.js";const f=i.createContext({});function S(){return i.useContext(f)}function p({children:u}){const[s,a]=i.useState([]),{userId:r,isSignedIn:o}=l();i.useEffect(()=>{if(o&&r){const t=localStorage.getItem(`favorites_${r}`);if(t)try{const e=JSON.parse(t);a(e)}catch(e){console.error("Error loading favorites:",e),localStorage.removeItem(`favorites_${r}`)}}else a([])},[r,o]),i.useEffect(()=>{o&&r&&s.length>0&&localStorage.setItem(`favorites_${r}`,JSON.stringify(s))},[s,r,o]);const c=t=>{o&&a(e=>e.some(n=>n.id===t.id)?e:[...e,t])},v=t=>{o&&a(e=>e.filter(n=>n.id!==t))},d=t=>s.some(e=>e.id===t);return m.jsx(f.Provider,{value:{favorites:s,addFavorite:c,removeFavorite:v,isFavorite:d},children:u})}export{p as FavoritesProvider,S as useFavorites};
//# sourceMappingURL=FavoritesProvider-e252e95d.js.map
